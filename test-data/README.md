# æ¸¬è©¦è³‡æ–™æº–å‚™æŒ‡å—

æœ¬è³‡æ–™å¤¾åŒ…å«æ‰€æœ‰ç”¨æ–¼é©—æ”¶æ¸¬è©¦çš„æ¸¬è©¦è³‡æ–™ã€‚

## ğŸ“ è³‡æ–™å¤¾çµæ§‹

```
test-data/
â”œâ”€â”€ README.md              # æœ¬æ–‡ä»¶
â”œâ”€â”€ videos/                # æ¸¬è©¦å½±ç‰‡æª”æ¡ˆ
â”‚   â”œâ”€â”€ valid/            # æœ‰æ•ˆçš„æ¸¬è©¦å½±ç‰‡
â”‚   â””â”€â”€ invalid/          # ç”¨æ–¼æ¸¬è©¦éŒ¯èª¤è™•ç†çš„ç„¡æ•ˆæª”æ¡ˆ
â”œâ”€â”€ fixtures/              # æ¸¬è©¦ç”¨çš„å›ºå®šè³‡æ–™
â””â”€â”€ results/              # æ¸¬è©¦çµæœä¿ç•™å€ (è‡ªå‹•ç”¢ç”Ÿ)
```

## ğŸ¬ éœ€è¦æº–å‚™çš„æ¸¬è©¦å½±ç‰‡

### æœ‰æ•ˆå½±ç‰‡æª”æ¡ˆ (æ”¾åœ¨ `videos/valid/`)

| æª”æ¡ˆåç¨± | å½±ç‰‡é•·åº¦ | è§£æåº¦ | æª”æ¡ˆå¤§å° | æ ¼å¼ | ç”¨é€” |
|---------|---------|--------|---------|------|------|
| `short-10s.mp4` | 10ç§’ | 1920x1080 | ~5MB | MP4/H.264 | æ¸¬è©¦åŸºæœ¬ä¸Šå‚³èˆ‡å¿«é€Ÿå‰ªè¼¯åŠŸèƒ½ |
| `medium-30s.mp4` | 30ç§’ | 1920x1080 | ~15MB | MP4/H.264 | æ¸¬è©¦æ¨™æº–å‰ªè¼¯æµç¨‹èˆ‡æˆæœ¬è¨ˆç®— |
| `long-2m.mp4` | 2åˆ†é˜ | 1920x1080 | ~50MB | MP4/H.264 | æ¸¬è©¦é•·å½±ç‰‡è™•ç†èˆ‡æ•ˆèƒ½ |
| `vertical-15s.mp4` | 15ç§’ | 1080x1920 | ~8MB | MP4/H.264 | æ¸¬è©¦ç›´å¼å½±ç‰‡ (æ‰‹æ©Ÿæ‹æ”æ ¼å¼) |
| `low-res-20s.mp4` | 20ç§’ | 1280x720 | ~10MB | MP4/H.264 | æ¸¬è©¦ä½è§£æåº¦å½±ç‰‡è™•ç† |

### ç„¡æ•ˆæª”æ¡ˆ (æ”¾åœ¨ `videos/invalid/`)

| æª”æ¡ˆåç¨± | ç”¨é€” |
|---------|------|
| `corrupted.mp4` | æ¸¬è©¦æå£æª”æ¡ˆçš„éŒ¯èª¤è™•ç† |
| `wrong-format.avi` | æ¸¬è©¦ä¸æ”¯æ´æ ¼å¼çš„è™•ç† |
| `too-large.mp4` | æ¸¬è©¦æª”æ¡ˆå¤§å°é™åˆ¶ (>500MB) |
| `not-a-video.txt` | æ¸¬è©¦å®Œå…¨éŒ¯èª¤çš„æª”æ¡ˆé¡å‹ |

## ğŸ“¥ å¦‚ä½•æº–å‚™æ¸¬è©¦å½±ç‰‡

### æ¨è–¦çš„å…è²»å½±ç‰‡ç´ æç¶²ç«™

1. **Pexels Videos** - https://www.pexels.com/videos/
   - å®Œå…¨å…è²»,ç„¡éœ€è¨»å†Š
   - å¯ä¸‹è¼‰ä¸åŒè§£æåº¦
   - æ¨è–¦ç”¨æ–¼å–å¾—é«˜å“è³ªæ¸¬è©¦ç´ æ

2. **Pixabay** - https://pixabay.com/videos/
   - å…è²»ä¸”ç„¡ç‰ˆæ¬Šé™åˆ¶
   - å¤šç¨®ä¸»é¡Œå¯é¸

3. **Coverr** - https://coverr.co/
   - ç²¾é¸çŸ­å½±ç‰‡ç´ æ
   - é©åˆå–å¾— 10-30 ç§’çš„çŸ­ç‰‡

### æº–å‚™æ­¥é©Ÿ

#### 1. ä¸‹è¼‰æœ‰æ•ˆæ¸¬è©¦å½±ç‰‡

```bash
# å¾ä¸Šè¿°ç¶²ç«™ä¸‹è¼‰å½±ç‰‡å¾Œ,é‡æ–°å‘½åä¸¦æ”¾åˆ°æ­£ç¢ºä½ç½®
# ç¯„ä¾‹ (ä½ éœ€è¦æ‰‹å‹•ä¸‹è¼‰,é€™è£¡åªæ˜¯ç¤ºæ„æª”æ¡ˆä½ç½®)

test-data/videos/valid/short-10s.mp4
test-data/videos/valid/medium-30s.mp4
test-data/videos/valid/long-2m.mp4
test-data/videos/valid/vertical-15s.mp4
test-data/videos/valid/low-res-20s.mp4
```

**æ³¨æ„äº‹é …**:
- ç¢ºä¿æª”æ¡ˆåç¨±å®Œå…¨ç¬¦åˆä¸Šè¡¨è¦æ ¼
- å½±ç‰‡é•·åº¦èˆ‡è§£æåº¦ç›¡é‡æ¥è¿‘è¦æ ¼ (ä¸éœ€è¦å®Œå…¨ç²¾ç¢º)
- æ‰€æœ‰å½±ç‰‡éƒ½æ‡‰è©²æ˜¯ MP4 æ ¼å¼ (H.264 ç·¨ç¢¼)

#### 2. æº–å‚™ç„¡æ•ˆæ¸¬è©¦æª”æ¡ˆ

```bash
# corrupted.mp4 - å»ºç«‹ä¸€å€‹æå£çš„ MP4 æª”æ¡ˆ
# æ–¹æ³•: è¤‡è£½ä¸€å€‹æ­£å¸¸ MP4,ç„¶å¾Œåˆªé™¤å‰é¢å¹¾ KB
dd if=videos/valid/short-10s.mp4 of=videos/invalid/corrupted.mp4 bs=1024 skip=100

# wrong-format.avi - ä¸‹è¼‰æˆ–è½‰æ›ä¸€å€‹ AVI æ ¼å¼å½±ç‰‡
# (å¯ä»¥ç”¨ ffmpeg è½‰æ›: ffmpeg -i input.mp4 -c copy output.avi)

# too-large.mp4 - ä¸‹è¼‰ä¸€å€‹è¶…é 500MB çš„å½±ç‰‡
# æˆ–ç”¨ ffmpeg ç”¢ç”Ÿä¸€å€‹å¤§æª”æ¡ˆ:
# ffmpeg -f lavfi -i testsrc=duration=600:size=1920x1080:rate=30 -pix_fmt yuv420p too-large.mp4

# not-a-video.txt - å»ºç«‹ä¸€å€‹æ–‡å­—æª”
echo "This is not a video file" > videos/invalid/not-a-video.txt
```

### é©—è­‰æª”æ¡ˆè¦æ ¼

æº–å‚™å¥½æª”æ¡ˆå¾Œ,å¯ä»¥ç”¨ `ffmpeg` æˆ– `ffprobe` é©—è­‰å½±ç‰‡è³‡è¨Š:

```bash
# å®‰è£ ffmpeg (å¦‚æœé‚„æ²’å®‰è£)
# macOS: brew install ffmpeg
# Ubuntu: sudo apt install ffmpeg

# æª¢æŸ¥å½±ç‰‡è³‡è¨Š
ffprobe -v error -show_entries format=duration,size,bit_rate -show_entries stream=width,height,codec_name videos/valid/short-10s.mp4

# å¿«é€Ÿæª¢æŸ¥æ‰€æœ‰å½±ç‰‡
for file in videos/valid/*.mp4; do
  echo "=== $file ==="
  ffprobe -v error -show_entries format=duration -show_entries stream=width,height "$file"
done
```

## ğŸ“‹ æ¸¬è©¦è³‡æ–™æº–å‚™æª¢æŸ¥æ¸…å–®

åœ¨åŸ·è¡Œé©—æ”¶æ¸¬è©¦å‰,è«‹ç¢ºèªä»¥ä¸‹é …ç›®:

### æœ‰æ•ˆå½±ç‰‡æª”æ¡ˆ
- [ ] `videos/valid/short-10s.mp4` (ç´„ 10 ç§’,1080p)
- [ ] `videos/valid/medium-30s.mp4` (ç´„ 30 ç§’,1080p)
- [ ] `videos/valid/long-2m.mp4` (ç´„ 2 åˆ†é˜,1080p)
- [ ] `videos/valid/vertical-15s.mp4` (ç´„ 15 ç§’,ç›´å¼)
- [ ] `videos/valid/low-res-20s.mp4` (ç´„ 20 ç§’,720p)

### ç„¡æ•ˆæ¸¬è©¦æª”æ¡ˆ
- [ ] `videos/invalid/corrupted.mp4`
- [ ] `videos/invalid/wrong-format.avi`
- [ ] `videos/invalid/too-large.mp4`
- [ ] `videos/invalid/not-a-video.txt`

### Fixtures è³‡æ–™
- [ ] `fixtures/test-users.json` (æ¸¬è©¦ç”¨æˆ¶è³‡æ–™)
- [ ] `fixtures/edit-prompts.json` (å‰ªè¼¯æŒ‡ä»¤ç¯„ä¾‹)
- [ ] `fixtures/expected-costs.json` (é æœŸæˆæœ¬æ•¸æ“š)

## ğŸ”§ æ¸¬è©¦è³‡æ–™ä½¿ç”¨è¦å‰‡

### è³‡æ–™åº«æ¸¬è©¦è³‡æ–™å‘½åè¦å‰‡
æ‰€æœ‰è‡ªå‹•æ¸¬è©¦ç”¢ç”Ÿçš„è³‡æ–™åº«è¨˜éŒ„éƒ½æ‡‰è©²åŠ ä¸Š `test_` å‰ç¶´,ä¾‹å¦‚:
- ç”¨æˆ¶: `test_user_001@example.com`
- å½±ç‰‡: `test_video_xxxxx`
- è¨‚å–®: `test_order_xxxxx`

é€™æ¨£å¯ä»¥:
- æ¸…æ¥šå€åˆ†æ¸¬è©¦è³‡æ–™èˆ‡çœŸå¯¦é–‹ç™¼è³‡æ–™
- æ–¹ä¾¿åœ¨éœ€è¦æ™‚æ¸…ç†æ¸¬è©¦è³‡æ–™
- é¿å…æ¸¬è©¦å½±éŸ¿åˆ°é–‹ç™¼ç’°å¢ƒ

### æ¸¬è©¦çµæœä¿ç•™ç­–ç•¥
- æ¯æ¬¡æ¸¬è©¦éƒ½æœƒåœ¨ `results/` ä¸‹å»ºç«‹æ–°çš„æ™‚é–“æˆ³è¨˜è³‡æ–™å¤¾
- ä¿ç•™æœ€è¿‘ 10 æ¬¡æ¸¬è©¦çµæœ
- å¤±æ•—çš„æ¸¬è©¦çµæœæ°¸é ä¿ç•™ (éœ€æ‰‹å‹•åˆªé™¤)
- `results/latest/` æ°¸é æŒ‡å‘æœ€æ–°ä¸€æ¬¡æ¸¬è©¦çµæœ

### æ¸…ç†æ¸¬è©¦è³‡æ–™

```bash
# æ¸…ç†è³‡æ–™åº«ä¸­çš„æ¸¬è©¦è³‡æ–™ (æœªä¾†æœƒæä¾›è…³æœ¬)
npm run test:cleanup

# æ¸…ç†èˆŠçš„æ¸¬è©¦çµæœ (ä¿ç•™æœ€è¿‘ 10 æ¬¡)
npm run test:cleanup-results

# å®Œå…¨æ¸…ç†æ‰€æœ‰æ¸¬è©¦è³‡æ–™ (è¬¹æ…ä½¿ç”¨!)
npm run test:cleanup-all
```

## ğŸš€ åŸ·è¡Œæ¸¬è©¦

æº–å‚™å¥½æ¸¬è©¦è³‡æ–™å¾Œ,å¯ä»¥åŸ·è¡Œé©—æ”¶æ¸¬è©¦:

```bash
# æª¢æŸ¥æ¸¬è©¦è³‡æ–™æ˜¯å¦å®Œæ•´
npm run verify:check-data

# åŸ·è¡Œå®Œæ•´é©—æ”¶æ¸¬è©¦
npm run verify:all

# åŸ·è¡Œç‰¹å®šæ¨¡çµ„çš„æ¸¬è©¦
npm run verify -- --module=upload
npm run verify -- --module=editing

# åŸ·è¡Œç‰¹å®šå±¤ç´šçš„æ¸¬è©¦
npm run verify:basic       # åŸºç¤é©—è­‰ (~1åˆ†é˜)
npm run verify:feature     # åŠŸèƒ½é©—è­‰ (~10åˆ†é˜)
npm run verify:e2e         # ç«¯å°ç«¯é©—è­‰ (~30åˆ†é˜)
npm run verify:cost        # æˆæœ¬é©—è­‰ (~10åˆ†é˜)
```

## ğŸ“Š æ¸¬è©¦å ±å‘Š

æ¯æ¬¡æ¸¬è©¦éƒ½æœƒç”¢ç”Ÿè©³ç´°çš„æ¸¬è©¦å ±å‘Š:

```
test-data/results/2025-10-07_14-30/
â”œâ”€â”€ test-report.json       # çµæ§‹åŒ–æ¸¬è©¦å ±å‘Š
â”œâ”€â”€ test-report.html       # äººé¡å¯è®€çš„ HTML å ±å‘Š
â”œâ”€â”€ test-log.txt           # å®Œæ•´æ¸¬è©¦æ—¥èªŒ
â”œâ”€â”€ uploaded-files/        # æ¸¬è©¦ä¸Šå‚³çš„æª”æ¡ˆ
â”œâ”€â”€ processed-files/       # æ¸¬è©¦è™•ç†å¾Œçš„æª”æ¡ˆ
â””â”€â”€ screenshots/           # éŒ¯èª¤æˆªåœ– (å¦‚æœæœ‰)
```

æŸ¥çœ‹æœ€æ–°æ¸¬è©¦å ±å‘Š:
```bash
# åœ¨ç€è¦½å™¨é–‹å•Ÿ HTML å ±å‘Š
open test-data/results/latest/test-report.html

# æŸ¥çœ‹ JSON å ±å‘Š
cat test-data/results/latest/test-report.json | jq
```

## â“ å¸¸è¦‹å•é¡Œ

### Q: æ¸¬è©¦å½±ç‰‡å¯ä»¥ç”¨ä»»ä½•å…§å®¹å—?
A: å¯ä»¥,ä½†å»ºè­°ä½¿ç”¨å¤šæ¨£åŒ–çš„å…§å®¹ (é¢¨æ™¯ã€äººç‰©ã€é‹å‹•ç­‰),ä»¥ä¾¿æ¸¬è©¦ä¸åŒå ´æ™¯çš„å‰ªè¼¯æ•ˆæœã€‚

### Q: å½±ç‰‡è¦æ ¼ä¸€å®šè¦å®Œå…¨ç¬¦åˆå—?
A: é•·åº¦å’Œå¤§å°å¯ä»¥æœ‰ Â±10% çš„èª¤å·®,ä½†è§£æåº¦å’Œæ ¼å¼æ‡‰è©²ç›¡é‡ç¬¦åˆè¦æ ¼ã€‚

### Q: å¯ä»¥ç”¨è‡ªå·±æ‹æ”çš„å½±ç‰‡å—?
A: å¯ä»¥,ä½†è«‹ç¢ºä¿ç¬¦åˆæª”æ¡ˆè¦æ ¼è¦æ±‚ã€‚

### Q: æ¸¬è©¦å½±ç‰‡è¦åŠ å…¥ git å—?
A: ä¸ç”¨,`test-data/videos/` å·²ç¶“åŠ å…¥ `.gitignore`,ä¸æœƒè¢«æäº¤åˆ° gitã€‚

### Q: æ¸¬è©¦è³‡æ–™å¤šä¹…éœ€è¦æ›´æ–°?
A: é€šå¸¸ä¸éœ€è¦æ›´æ–°,é™¤é:
  - æ”¯æ´çš„å½±ç‰‡æ ¼å¼æ”¹è®Š
  - æª”æ¡ˆå¤§å°é™åˆ¶æ”¹è®Š
  - éœ€è¦æ¸¬è©¦æ–°çš„å ´æ™¯

## ğŸ“ ç‰ˆæœ¬è¨˜éŒ„

- 2025-10-07: åˆå§‹ç‰ˆæœ¬,å®šç¾©æ¸¬è©¦è³‡æ–™çµæ§‹èˆ‡æº–å‚™æµç¨‹
