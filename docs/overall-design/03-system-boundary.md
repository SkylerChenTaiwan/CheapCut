# 步驟 3：系統邊界劃分

**狀態**：⬜️ 未開始
**前置依賴**：01-product-core.md, 02-key-flows.md
**目標**：明確哪些我們自己做、哪些用外部服務

---

## 系統邊界圖（待填寫）

```
┌─────────────────────────────────────┐
│         我們的系統（CheapCut）        │
│                                     │
│  ┌─────────┐      ┌──────────┐    │
│  │ 前端UI  │ ←──→ │ 後端API  │    │
│  └─────────┘      └──────────┘    │
│                       ↓            │
│                   ┌──────────┐    │
│                   │ 處理引擎 │    │
│                   └──────────┘    │
└─────────────────────────────────────┘
         ↓              ↓
    [外部服務]      [外部服務]
```

---

## 內部系統（我們開發）

### 核心功能模組

| 模組 | 職責 | 為什麼自己做 |
|------|------|--------------|
| | | |

### 資料與狀態

| 項目 | 說明 | 儲存位置 |
|------|------|----------|
| 用戶資料 | | |
| 影片專案資料 | | |
| 生成任務狀態 | | |

---

## 外部依賴（第三方服務）

### AI 服務

| 功能 | 候選服務 | 為什麼用外部 |
|------|----------|--------------|
| 文字生成/腳本優化 | OpenAI / Claude | |
| 圖片生成 | DALL-E / SD | |
| 語音合成 | ElevenLabs / Google TTS | |

---

### 素材資源

| 類型 | 候選服務 | 為什麼用外部 |
|------|----------|--------------|
| 圖片素材 | Unsplash / Pexels | |
| 影片素材 | Pexels Videos | |
| 音樂音效 | Pixabay Music | |

---

### 基礎設施

| 服務 | 候選方案 | 為什麼用外部 |
|------|----------|--------------|
| 物件儲存 | S3 / R2 | |
| CDN | Cloudflare | |
| 資料庫託管 | Supabase / PlanetScale | |

---

## 介面定義（我們 ↔ 外部）

### AI 服務整合

**我們需要提供給 AI**：

**AI 回傳給我們**：

**整合方式**：REST API / SDK

---

### 素材服務整合

**我們需要提供**：

**素材庫回傳**：

**整合方式**：

---

### 儲存服務整合

**我們需要做**：

**儲存服務負責**：

**整合方式**：

---

## 關鍵決策

### 決策 1：影片處理在哪裡做？

**選項 A - 自己的伺服器（FFmpeg）**
- 優點：
- 缺點：
- 成本：

**選項 B - 外部服務（Cloudflare Stream）**
- 優點：
- 缺點：
- 成本：

**選項 C - 瀏覽器端（WebCodecs / Canvas）**
- 優點：
- 缺點：
- 成本：

**決定**：

---

### 決策 2：資料庫自建 vs 託管？

**選項 A - 自建（Docker + PostgreSQL）**
- 優點：
- 缺點：

**選項 B - 託管（Supabase / RDS）**
- 優點：
- 缺點：

**決定**：

---

### 決策 3：認證系統

**選項 A - 自建 JWT**
- 優點：
- 缺點：

**選項 B - 第三方（Supabase Auth / Clerk）**
- 優點：
- 缺點：

**選項 C - MVP 階段不需要登入**
- 優點：
- 缺點：

**決定**：

---

## 數據主權與隱私考量

### 用戶數據流向
| 數據類型 | 會送到哪些第三方 | 目的 | 隱私等級 |
|---------|----------------|------|---------|
| 用戶腳本 | OpenAI/Claude/Gemini | 場景分析 | 🔴 高敏感 |
| 圖片 prompt | DALL-E/SD | 圖片生成 | 🟡 中敏感 |
| 旁白文字 | TTS 服務 | 語音合成 | 🟡 中敏感 |
| 生成的影片 | 物件儲存（R2/S3） | 儲存交付 | 🟡 中敏感 |

### 隱私保護措施
- [ ] 用戶協議中說明數據會送至第三方 AI
- [ ] 提供「不使用 AI，僅用免費素材」選項
- [ ] 生成完成後 X 天自動刪除影片
- [ ] 其他：

### 合規考量
- [ ] GDPR（歐盟）
- [ ] 個資法（台灣/其他地區）
- [ ] 第三方 AI 服務的 ToS 限制
- [ ] 素材版權問題

**決定**：


---

## 依賴風險評估

### 高風險依賴
<!-- 如果這個服務掛了，我們就完全不能用 -->

| 服務 | 風險 | 備案 |
|------|------|------|
| | | |

### 中風險依賴
<!-- 影響體驗但有替代方案 -->

| 服務 | 風險 | 備案 |
|------|------|------|
| | | |

### 低風險依賴
<!-- 可替換性高 -->

| 服務 | 風險 | 備案 |
|------|------|------|
| | | |

---

**完成檢查**：
- [ ] 明確劃分了內部系統和外部依賴
- [ ] 列出了所有需要的第三方服務
- [ ] 定義了與外部服務的整合介面
- [ ] 評估了依賴風險並有備案

**完成後**：更新 `00-INDEX.md` 狀態，繼續步驟 4
