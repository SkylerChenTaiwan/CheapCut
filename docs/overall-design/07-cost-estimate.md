# 步驟 7：成本結構估算

**狀態**：✅ 已完成
**前置依賴**：06-tech-direction.md
**目標**：粗估每月成本、每支影片成本

---

## 成本模型

```
總成本 = 固定成本（每月） + 變動成本（每支影片 × 數量）
```

---

## 1. 固定成本（每月）

### 基礎設施

| 項目 | 服務 | 方案 | 月費 | 備註 |
|------|------|------|------|------|
| 前端託管 | Vercel | 免費層 | $0 | 100GB 流量 |
| 後端伺服器 | GCP Cloud Run | 免費層 | $0 | 200萬次請求/月、36萬 GB-秒 |
| 資料庫 | Supabase | 免費層 | $0 | 500MB, 2GB 儲存 |
| 物件儲存 | GCP Cloud Storage | 免費層 | $0 | 5GB 儲存/月 |
| CDN | Cloudflare | 免費層 | $0 | 無限流量 |
| 網域 | Cloudflare | 註冊 | $1 | 年費 ~$12 |
| **小計** | | | **$1** | |

### 可選服務

| 項目 | 服務 | 方案 | 月費 |
|------|------|------|------|
| 監控 | GCP Cloud Logging | 免費層 | $0 |
| 認證 | Supabase Auth | 包含在上面 | $0 |
| 快取 | Upstash Redis | 免費層 | $0 |
| **小計** | | | **$0** |

### 固定成本總計：**$1/月**

---

## 2. 變動成本（每支影片）

### 假設場景參數
```
影片長度：60 秒
場景數：5 個
每場景：1 張圖 + 對應語音
腳本長度：~500 字
```

---

### AI 服務成本

#### 2.1 腳本分析與智能選片（LLM 文字生成）

**包含功能**：
- 配音語意分析
- 配音切分決策
- 智能選片決策（核心！）
- 候選片段推薦

| 服務 | 用量估算 | 單價 | 成本 |
|------|---------|------|------|
| Gemini Pro | ~3000 tokens（語意+選片） | 免費（1500 req/day 限額內） | $0 |
| Gemini Flash | ~3000 tokens | 免費（更高限額） | $0 |
| GPT-3.5 Turbo | ~3000 tokens | $0.5 / 1M input<br>$1.5 / 1M output | ~$0.003 |

**採用**：**Gemini Flash**（主要）+ Gemini Pro（備用）
**每支影片成本**：**$0**（免費額度內）

---

#### 2.2 影片分析（Google Video AI）

**說明**：用戶上傳的素材影片需要進行 AI 分析來自動打標籤

| 服務 | 用量估算 | 單價 | 成本 |
|------|---------|------|------|
| Google Video Intelligence API | 假設 5 支素材，每支 30 秒 | $0.10/分鐘 | $0.25 |

**備註**：
- 此成本不是每次生成影片都會產生
- 僅在用戶上傳新素材時才會產生
- 假設用戶上傳 5 支 30 秒素材，總共 2.5 分鐘

**採用**：**Google Video Intelligence API**
**每次上傳素材成本**：**~$0.25**（一次性）
**分攤到每支影片**：假設 1 次上傳素材可生成 10 支影片 → **~$0.025/支**

---

#### 2.3 語音轉文字（STT）

**說明**：用戶錄製配音後，需要轉成文字進行語意分析

| 服務 | 用量估算 | 單價 | 成本 |
|------|---------|------|------|
| OpenAI Whisper API | 60 秒配音 = 1 分鐘 | $0.006/分鐘 | $0.006 |
| Google Cloud STT | 60 秒 = 4 個 15 秒單位 | $0.006/15 秒 | $0.024 |
| AssemblyAI | 60 秒 | $0.00025/秒 | $0.015 |

**採用**：**OpenAI Whisper API**
**每支影片成本**：**$0.006**

---

### 影片處理成本

#### 2.4 影片合成渲染

**說明**：使用 FFmpeg 在 Cloud Run 上進行影片合成

| 項目 | 計算方式 | 成本 |
|------|---------|------|
| Cloud Run 運算 | 假設渲染 60 秒影片需要 30 秒<br>1 vCPU × 2GB 記憶體 × 30 秒 | ~$0.0001 |

**備註**：
- FFmpeg 是免費軟體，無授權成本
- 僅需支付 Cloud Run 的運算費用
- Cloud Run 免費額度：36 萬 GB-秒/月，可支援大量影片
- 30 秒 × 2GB = 60 GB-秒，遠低於免費額度

**每支影片成本**：**~$0**（免費額度內）

---

### 儲存與流量成本

#### 2.5 儲存成本

| 項目 | 用量 | 單價 | 成本 |
|------|------|------|------|
| 素材影片儲存 | ~50MB（5 支 × 10MB） | GCP Storage 免費（5GB內） | $0 |
| 配音音檔 | ~2MB | GCP Storage 免費（5GB內） | $0 |
| 最終影片儲存 | ~10MB | GCP Storage 免費（5GB內） | $0 |

**每支影片成本**：**$0**（免費額度內）

---

#### 2.6 流量成本（CDN）

| 項目 | 用量 | 單價 | 成本 |
|------|------|------|------|
| 影片下載流量 | 10MB × 1 次下載 | Cloudflare CDN 免費 | $0 |

**每支影片成本**：**$0**（免費額度內）

---

### 變動成本總計

| 項目 | 成本 | 備註 |
|------|------|------|
| LLM 分析與選片 | $0 | Gemini 免費額度 |
| 影片分析（分攤） | $0.025 | 一次上傳可生成多支影片 |
| 語音轉文字（STT） | $0.006 | OpenAI Whisper |
| 影片合成渲染 | $0 | Cloud Run 免費額度 |
| 儲存 | $0 | GCP Storage 免費額度 |
| 流量 | $0 | Cloudflare CDN 免費 |
| **每支影片總成本** | **~$0.031** | **約 3 分美元** |

**成本拆解**：
- **直接成本**：$0.006（STT）
- **分攤成本**：$0.025（影片分析）
- **其餘全部免費**（LLM、渲染、儲存、流量）

---

## 3. 規模化成本試算

### 場景 1：小規模（每日 10 支）

| 項目 | 計算 | 月費用 |
|------|------|--------|
| 固定成本 | | $1 |
| 變動成本 | 10 × 30 × $0.031 | $9.30 |
| **總計** | | **$10.30** |
| **每支影片平攤成本** | | **$0.034** |

**評估**：
- 所有服務都在免費額度內
- 月成本極低（< $11）
- 可持續運營

---

### 場景 2：中規模（每日 100 支）

| 項目 | 計算 | 月費用 |
|------|------|--------|
| 固定成本 | 仍在免費層 | $1 |
| 變動成本 | 100 × 30 × $0.031 | $93 |
| **總計** | | **$94** |
| **每支影片平攤成本** | | **$0.031** |

**評估**：
- Gemini 免費額度：1500 req/day，可支援
- Cloud Run 免費額度：200 萬 req/月，足夠
- 可能需要升級：儲存空間（超過 5GB 後付費 $0.02/GB）
- 主要成本仍是 STT（$18/月）和影片分析（$75/月）

---

### 場景 3：大規模（每日 1000 支）

| 項目 | 計算 | 月費用 |
|------|------|--------|
| 固定成本 | 需升級部分服務 | $20 |
| 變動成本 | 1000 × 30 × $0.031 | $930 |
| 資料庫升級 | Supabase Pro | $25 |
| 儲存升級 | 超出免費層部分 | $10 |
| **總計** | | **$985** |
| **每支影片平攤成本** | | **$0.033** |

**評估**：
- 需要升級資料庫、儲存
- Gemini 可能達到免費限額，需考慮備案
- Cloud Run 可能超出免費額度（但成本仍低）
- 主要成本：STT $180/月、影片分析 $750/月

**規模效應**：固定成本分攤，單位成本幾乎不變（$0.031 → $0.033）

---

## 4. 成本優化策略

### 優化方向 1：降低 AI 成本
- [x] 優先使用免費 API（Gemini Flash）✅ 已採用
- [ ] 批量分析多段配音，減少 API 調用次數
- [ ] 快取選片結果（相同關鍵字的片段選擇）
- [ ] 使用更便宜的 STT（如自建 Whisper）

**預期節省**：
- 批量請求：可減少 ~20% LLM 成本（但目前已免費）
- 自建 Whisper：可節省 $0.006/支 → **但需要額外伺服器成本**

---

### 優化方向 2：利用免費額度（已最大化）
| 服務 | 免費額度 | 可支撐產量 | 狀態 |
|------|----------|-----------|------|
| Gemini Flash | 1500 req/day | ~1500 支/天 | ✅ 已採用 |
| Cloud Run | 200 萬次/月 | ~6.6 萬支/月 | ✅ 已採用 |
| GCP Storage | 5GB/月 | ~500 支影片 | ✅ 已採用 |
| Cloudflare CDN | 無限流量 | 無限 | ✅ 已採用 |
| Supabase | 500MB DB | ~1 萬筆記錄 | ✅ 已採用 |

**評估**：目前已最大化使用免費額度 ✅

---

### 優化方向 3：降低影片分析成本
**當前痛點**：Google Video AI 是最大成本來源（$0.025/支）

**優化方案**：
1. **重複使用素材**：鼓勵用戶重複使用已分析的素材
   - 一次分析，生成多支影片
   - 素材庫共享（未來功能）

2. **減少分析頻率**：
   - 只在用戶明確要求時才重新分析
   - 快取分析結果

3. **替代方案**（未來）：
   - 使用開源模型（如 VideoMAE）自建分析服務
   - 成本：伺服器費用 vs. API 費用，需評估

**預期節省**：如果用戶平均每次上傳可生成 20 支影片 → $0.025 → $0.0125/支

---

## 5. 收入模式（可選）

### 方案 A：完全免費
- 成本：需自己承擔
- 適合：個人專案、作品集

---

### 方案 B：Freemium

| 方案 | 定價 | 配額 | 成本 | 利潤 |
|------|------|------|------|------|
| 免費版 | $0 | 5 支/月 | $0.16 | -$0.16 |
| 專業版 | $9.99/月 | 100 支/月 | $3.10 | $6.89 |
| 企業版 | $49.99/月 | 1000 支/月 | $31 | $18.99 |

**盈利分析**：
- 免費版虫本極低（每用戶/月 < $0.2）
- 專業版利潤率：69%
- 企業版利潤率：38%
- **只要有少量付費用戶，即可覆蓋免費用戶成本**

---

### 方案 C：用戶自備 API Key
- 用戶使用自己的 OpenAI/Gemini 帳號
- 我們只提供平台（可考慮小額平台費）
- 成本：幾乎為 0

---

## 6. 成本風險

### 風險 1：API 漲價
**可能性**：中
**影響**：高
**應對**：準備多個替代方案

---

### 風險 2：超出免費額度
**可能性**：高（如果產品受歡迎）
**影響**：中
**應對**：監控用量、設定告警、準備升級計畫

---

### 風險 3：濫用
**可能性**：中
**影響**：高（成本失控）
**應對**：
- [ ] Rate limiting
- [ ] 用戶配額
- [ ] CAPTCHA

---

## 7. 成本控制機制

### 即時監控
- [ ] 每日成本儀表板
- [ ] API 用量告警
- [ ] 成本閾值通知

### 用戶限制
- [ ] IP 限流
- [ ] 每日生成上限
- [ ] 需要註冊才能使用

---

## 成本總結

### MVP 階段目標成本 ✅ 達成
- **固定成本**：**$1 / 月** ✅（遠低於目標 $50）
- **變動成本**：**$0.031 / 支** ✅（遠低於目標 $0.10）
- **日產 10 支的月總成本**：**$10.30** ✅（遠低於目標 $100）

### 成本競爭力 🏆
| 對比項 | 成本 | CheapCut 優勢 |
|--------|------|--------------|
| 人工剪輯 | $50-200 / 支 | **1,600 - 6,400 倍便宜** |
| 其他 AI 工具 | $10-50 / 支 | **320 - 1,600 倍便宜** |
| **CheapCut 實際** | **$0.031 / 支** | **極致成本優化** ✅ |

### 成本結構分析
```
每支影片成本：$0.031

成本佔比：
├─ 影片分析（分攤）：$0.025 (81%) ← 最大成本
├─ 語音轉文字：      $0.006 (19%)
└─ 其他（全部免費）：  $0     (0%)
```

### 關鍵發現 💡

1. **極低成本已達成**：$0.031/支 遠低於任何競爭對手
2. **規模化不增成本**：單位成本幾乎不隨規模變化（$0.031 → $0.033）
3. **免費額度充足**：日產 100 支仍在大部分免費額度內
4. **可持續盈利**：即使 $9.99/月 訂閱制，利潤率仍達 69%

### 風險評估

**低風險** ✅：
- 成本可預測、可控
- 免費額度充足
- 無需前期投入

**中風險** ⚠️：
- Google Video AI 漲價（但佔比可優化）
- Gemini 免費額度政策變更（可切換到 Grok 或其他）

---

**完成檢查**：
- [x] 計算了固定成本（$1/月）
- [x] 估算了每支影片的變動成本（$0.031/支）
- [x] 做了不同規模的成本試算（日產 10/100/1000）
- [x] 提出了成本優化策略（3 個方向）
- [x] 評估了成本風險（低風險）
- [x] 分析了盈利模式（Freemium 可行）
- [x] 對比了競爭對手成本（優勢明顯）

**完成後**：更新 `00-INDEX.md` 狀態，繼續步驟 8
