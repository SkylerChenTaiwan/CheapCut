# 步驟 2：關鍵流程設計

**狀態**：⬜️ 未開始
**前置依賴**：01-product-core.md
**目標**：畫出主要的使用流程

---

## 核心流程：影片生成

### 流程圖（待填寫）

```
用戶輸入
  ↓
處理階段 1
  ↓
處理階段 2
  ↓
...
  ↓
影片輸出
```

---

### 詳細步驟拆解

#### 階段 1：用戶輸入
**用戶做什麼**：

**系統做什麼**：

**產出**：

**預計耗時**：

---

#### 階段 2：內容處理
**輸入**：

**處理邏輯**：

**產出**：

**預計耗時**：

---

#### 階段 3：素材生成/獲取
**輸入**：

**處理邏輯**：

**產出**：

**預計耗時**：

---

#### 階段 4：影片組裝
**輸入**：

**處理邏輯**：

**產出**：

**預計耗時**：

---

#### 階段 5：交付
**輸入**：

**處理邏輯**：

**產出**：

**用戶體驗**：

---

## 異常流程

### 情境 1：腳本不合規
**觸發條件**：

**處理方式**：

---

### 情境 2：生成失敗
**觸發條件**：

**處理方式**：

---

### 情境 3：素材不足
**觸發條件**：

**處理方式**：

---

## 關鍵決策點

### 決策 1：同步 vs 異步
**問題**：影片生成是讓用戶等待，還是背景處理？

**選項 A - 同步等待**：
- 優點：
- 缺點：

**選項 B - 異步任務**：
- 優點：
- 缺點：

**決定**：

---

### 決策 2：預覽機制
**問題**：用戶可以在生成完成前預覽嗎？

**選項 A - 無預覽**：
- 優點：
- 缺點：

**選項 B - 即時預覽**：
- 優點：
- 缺點：

**決定**：

---

### 決策 3：重新生成策略
**問題**：用戶不滿意時如何處理？

**選項**：
- [ ] 完全重新生成
- [ ] 局部調整（替換素材、調整配音等）
- [ ] 不支援修改

**決定**：

---

## 流程總結

### 整體時間估算
| 階段 | 預計耗時 |
|------|----------|
| 階段 1 | |
| 階段 2 | |
| 階段 3 | |
| 階段 4 | |
| 階段 5 | |
| **總計** | |

### 瓶頸分析
**最慢的環節**：

**優化方向**：

---

### 最差情況時間估算
**如果所有 API 都慢到上限**：
| 階段 | 最差情況耗時 |
|------|-------------|
| 階段 1 | |
| 階段 2 | |
| 階段 3 | |
| 階段 4 | |
| 階段 5 | |
| **最差總計** | |

**用戶體驗影響**：

**應對策略**：
- [ ] 超時自動重試
- [ ] 提前告知用戶可能等待時間
- [ ] 異步處理 + 通知機制
- [ ] 其他：

---

**完成檢查**：
- [ ] 畫出完整的影片生成流程
- [ ] 每個階段的輸入輸出明確
- [ ] 定義了異常處理流程
- [ ] 做出了關鍵的流程決策

**完成後**：更新 `00-INDEX.md` 狀態，繼續步驟 3
