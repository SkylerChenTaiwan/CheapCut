# 步驟 6：技術方向選擇

**狀態**：⬜️ 未開始
**前置依賴**：03-system-boundary.md, 04-module-breakdown.md
**目標**：做出大方向的技術決策（不需要太細節）

---

## 技術選型原則

基於產品目標「最低成本」，我們的技術選型應遵循：

- [ ] **成本優先**：免費方案 > 按需計費 > 固定月費
- [ ] **快速開發**：選擇熟悉的技術，減少學習曲線
- [ ] **可擴展性**：初期簡單，但要能支撐成長
- [ ] **社群支援**：有問題能快速找到解決方案
- [ ] 其他：

---

## 1. 前端技術方向

### 框架選擇

| 選項 | 適合原因 | 不適合原因 | 推薦度 |
|------|----------|-----------|--------|
| **Next.js** | 全端框架、Vercel 免費部署、SSR | 可能過重 | ⭐️⭐️⭐️ |
| **React + Vite** | 輕量、靈活 | 需要自己配置很多 | ⭐️⭐️ |
| **純 HTML/JS** | 最簡單 | 缺乏結構 | ⭐️ |

**初步決定**：

---

### UI 元件方案

| 選項 | 優點 | 缺點 |
|------|------|------|
| **Tailwind CSS** | 快速、檔案小 | 需要學習 |
| **shadcn/ui** | 現成元件、美觀 | 基於 Tailwind |
| **原生 CSS** | 完全控制 | 慢 |

**初步決定**：

---

## 2. 後端技術方向

### 語言與框架

| 選項 | 適合原因 | 不適合原因 | 推薦度 |
|------|----------|-----------|--------|
| **Node.js (Express/Fastify)** | 與前端同語言、豐富生態 | 單執行緒限制 | ⭐️⭐️⭐️ |
| **Python (FastAPI)** | AI 生態好、簡潔 | 可能需要多學 | ⭐️⭐️⭐️ |
| **Go** | 效能好 | 學習曲線 | ⭐️⭐️ |

**初步決定**：

**理由**：

---

### 部署方式

| 選項 | 成本 | 適用場景 | 推薦度 |
|------|------|----------|--------|
| **Serverless (Vercel/Netlify Functions)** | 免費額度大 | 輕量 API | ⭐️⭐️⭐️ |
| **Docker + Cloud Run / Fly.io** | 按需計費 | 需要長時間處理 | ⭐️⭐️ |
| **VPS (DigitalOcean/Linode)** | 固定月費 | 可預測流量 | ⭐️⭐️ |

**初步決定**：

**考量**：影片生成可能需要較長時間，Serverless 的 timeout 限制？

---

## 3. 資料庫方向

### 主資料庫

| 選項 | 免費額度 | 適用場景 | 推薦度 |
|------|----------|----------|--------|
| **PostgreSQL (Supabase)** | 500MB，免費層 | 關聯資料、需要 SQL | ⭐️⭐️⭐️ |
| **MongoDB (Atlas)** | 512MB 免費 | 靈活 Schema | ⭐️⭐️ |
| **SQLite (本地)** | 完全免費 | MVP 原型 | ⭐️⭐️ |

**初步決定**：

---

### 快取（可選）

**需要嗎**：[ ] 是 / [ ] 否

**如果需要**：
- Redis (Upstash 免費層)
- In-memory cache

---

## 4. 影片處理技術

### 影片生成方案

| 方案 | 技術 | 優點 | 缺點 | 推薦度 |
|------|------|------|------|--------|
| **伺服器端 FFmpeg** | FFmpeg CLI | 功能完整、免費 | 需要伺服器資源 | ⭐️⭐️⭐️ |
| **Remotion** | React + Node.js | 用 React 寫影片 | 學習曲線 | ⭐️⭐️⭐️ |
| **瀏覽器端 (Canvas)** | HTML5 Canvas | 零伺服器成本 | 受限於裝置 | ⭐️⭐️ |
| **雲端服務 (Cloudflare Stream)** | SaaS | 完全託管 | 成本高 | ⭐️ |

**初步決定**：

**理由**：

---

## 5. AI 服務方向

### 文字生成

| 服務 | 免費額度 | 成本 | 推薦度 |
|------|----------|------|--------|
| **OpenAI GPT-3.5** | $5 credit | $0.5/1M tokens | ⭐️⭐️⭐️ |
| **Claude (Anthropic)** | 限時免費 | 類似 GPT | ⭐️⭐️⭐️ |
| **Gemini** | 免費額度大 | 免費 | ⭐️⭐️⭐️ |
| **開源 LLM (Ollama)** | 完全免費 | 需自己部署 | ⭐️⭐️ |

**初步決定**：

---

### 圖片生成

| 服務 | 成本 | 品質 | 推薦度 |
|------|------|------|--------|
| **DALL-E 3** | ~$0.04/張 | 高 | ⭐️⭐️ |
| **Stable Diffusion (API)** | 便宜 | 中 | ⭐️⭐️⭐️ |
| **免費素材庫 (Unsplash/Pexels)** | $0 | 依內容 | ⭐️⭐️⭐️ |

**初步決定**：混合方案？

---

### 語音合成

| 服務 | 成本 | 品質 | 推薦度 |
|------|------|------|--------|
| **OpenAI TTS** | $15/1M 字 | 高 | ⭐️⭐️⭐️ |
| **ElevenLabs** | 10k 字/月免費 | 極高 | ⭐️⭐️ |
| **Google Cloud TTS** | 0-1M 字免費 | 中 | ⭐️⭐️⭐️ |

**初步決定**：

---

## 6. 儲存與 CDN

### 物件儲存

| 服務 | 免費額度 | 特色 | 推薦度 |
|------|----------|------|--------|
| **Cloudflare R2** | 10GB 免費 | 無 egress 費用 | ⭐️⭐️⭐️ |
| **AWS S3** | 5GB/12個月 | 業界標準 | ⭐️⭐️ |
| **Supabase Storage** | 1GB 免費 | 整合資料庫 | ⭐️⭐️⭐️ |

**初步決定**：

---

### CDN

**需要嗎**：[ ] 是 / [ ] 否（影片直接從儲存服務拿）

**如果需要**：
- Cloudflare（免費）

---

## 7. 開發環境設定

### 本地開發環境
**需要的工具**：
- [ ] Node.js / Python
- [ ] Docker（是否需要？）
- [ ] FFmpeg（本地測試影片生成）
- [ ] 其他：

### 本地開發如何跑？
**選項 A - 全本地**：
- 資料庫：本地 PostgreSQL / SQLite
- 儲存：本地檔案系統
- AI 服務：需要自己的 API key

**選項 B - 混合（推薦）**：
- 資料庫：Supabase 開發環境
- 儲存：R2/S3 測試 bucket
- AI 服務：共用開發 API key（設定用量限制）

**選項 C - Docker Compose**：
- 所有服務都容器化
- 一鍵啟動完整環境

**決定**：

### 環境變數管理
```
.env.local（本地開發）
.env.staging（測試環境）
.env.production（正式環境）
```

**必要的環境變數**：
- DATABASE_URL
- STORAGE_API_KEY
- OPENAI_API_KEY
- ...

---

## 8. DevOps 方向

### 版本控制
**決定**：Git + GitHub（標準）

### CI/CD
**決定**：GitHub Actions（免費）

### 監控與日誌
**MVP 階段**：
- 簡單的 console.log
- Vercel/部署平台內建的日誌

**未來**：Sentry、LogRocket

---

## 9. 認證與授權（如需要）

**MVP 階段是否需要登入**：[ ] 是 / [ ] 否

**如果需要**：
- Supabase Auth（免費）
- Clerk（免費額度）
- 自建 JWT

**初步決定**：

---

## 技術棧總結

### 推薦組合 A（全 Serverless）
```
前端：Next.js + Tailwind
後端：Vercel Serverless Functions (Node.js)
資料庫：Supabase (PostgreSQL)
影片處理：Remotion (Serverless 渲染)
儲存：Cloudflare R2
AI：OpenAI + Stable Diffusion API
```

**優點**：
**缺點**：

---

### 推薦組合 B（混合）
```
前端：React + Vite
後端：Node.js/Python + Docker (Fly.io/Railway)
資料庫：Supabase
影片處理：FFmpeg (後端)
儲存：Cloudflare R2
AI：Gemini (免費) + Pexels (素材)
```

**優點**：
**缺點**：

---

## 最終決定（待討論後填寫）

### 技術棧
| 層級 | 技術 | 理由 |
|------|------|------|
| 前端 | | |
| 後端 | | |
| 資料庫 | | |
| 影片處理 | | |
| 儲存 | | |
| AI 服務 | | |

---

**完成檢查**：
- [ ] 確定了前端技術方向
- [ ] 確定了後端技術與部署方式
- [ ] 選擇了資料庫方案
- [ ] 決定了影片處理技術
- [ ] 選擇了 AI 服務
- [ ] 規劃了儲存方案

**完成後**：更新 `00-INDEX.md` 狀態，繼續步驟 7
